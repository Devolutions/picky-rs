# Picky C API

This crate exposes a C API following C-compatible ABI conventions.

## Native library build

Build is as simple as:

```
$ cargo build -p picky-c-api
```

or

```
$ cargo build -p picky-c-api --release
```

Binary will be generated inside `target` folder located at workspace root.

## C header

C header is located in the `./include/` folder.
It is autogenerated using [`cbindgen`](https://github.com/eqrion/cbindgen/blob/master/docs.md).

## C# .NET bindings

C# .NET bindings are located in the `./dotnet/` folder.

The raw interface is autogenerated from the C header using
Microsoft's [`ClangSharpPInvokeGenerator`](https://github.com/microsoft/ClangSharp).
The tool may be installed [from NuGet Gallery](https://www.nuget.org/packages/ClangSharpPInvokeGenerator/) using `dotnet tool install` command.

Considered alternatives:

- [`C2CS`](https://github.com/lithiumtoast/c2cs)
- [`oo_bindgen`](https://github.com/stepfunc/oo_bindgen/)
- [`interoptopus`](https://github.com/ralfbiedert/interoptopus)
- [`Swig`](http://swig.org)

## Justfile

A [justfile](https://github.com/casey/just) is provided to run common commands useful at developement time.

Commands for generating the bindings are issued with

```
$ just bindings
```

and sanity tests are run with

```
$ just test
```
